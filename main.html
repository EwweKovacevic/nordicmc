<!DOCTYPE html>
<html>
    <body>
        <center>
            <title>Nordic MC Hub</title>
            <link rel="stylesheet" href="CSS/main.css">
            <h1>Nordic MC Hub</h1>
            <br>
            <div itemscope itemtype='http://schema.org/Person' class='fiverr-seller-widget' style='display: inline-block;'>
                <a itemprop='url' href=https://www.fiverr.com/ewwekovacevic rel="nofollow" target="_blank" style='display: inline-block;'>
                   <div class='fiverr-seller-content' id='fiverr-seller-widget-content-c1315db7-7342-4a33-bb02-8350044dfd28' itemprop='contentURL' style='display: none;'></div>
                   <div id='fiverr-widget-seller-data' style='display: none;'>
                       <div itemprop='name' >ewwekovacevic</div>
                       <div itemscope itemtype='http://schema.org/Organization'><span itemprop='name'>Fiverr</span></div>
                       <div itemprop='jobtitle'>Seller</div>
                       <div itemprop='description'>Hello! I'm from Sweden.</div>
                   </div>
               </a>
           </div>
           
           <script id='fiverr-seller-widget-script-c1315db7-7342-4a33-bb02-8350044dfd28' src='https://widgets.fiverr.com/api/v1/seller/ewwekovacevic?widget_id=c1315db7-7342-4a33-bb02-8350044dfd28' data-config='{"category_name":"Programming \u0026 Tech"}' async='true' defer='true'></script>
        </center>
        <script>
        window.onload = () => {
            const fragment = new URLSearchParams(window.location.hash.slice(1));
            const [accessToken, tokenType] = [fragment.get('access_token'), fragment.get('token_type')];
            
            if (!accessToken) {
                window.location.href('/')
                return (document.getElementById('login').style.display = 'block');
            }

            fetch('https://discord.com/api/users/@me', {
    headers: {
        authorization: `${tokenType} ${accessToken}`,
    },
    })
    .then(result => result.json())
    .then(response => {
        console.log(response);
        const { username, discriminator, avatar, id} = response;
        //set the welcome username string
        document.getElementById('name').innerText = ` ${username}#${discriminator}`;

        //set the avatar image by constructing a url to access discord's cdn
        document.getElementById("avatar").src = `https://cdn.discordapp.com/avatars/${id}/${avatar}.jpg`;
    })
    .catch(console.error);

            
            
            };
            </script>
    </body>
</html>